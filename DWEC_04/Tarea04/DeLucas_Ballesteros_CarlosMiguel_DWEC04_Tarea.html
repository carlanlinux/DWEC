<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DeLucas_Ballesteros_CarlosMiguel_DWEC04_Tarea</title>
</head>
<body>
<script type="text/javascript">

    function Edificio(calle, numero, cp) {

        //Propiedades
        this.calle = calle;
        this.numero = numero;
        this.cp = cp;
        this.plantas = [];

        document.write("<ul><li>Construido nuevo edificio en calle: " + this.calle + " no: " + this.numero, ", CP: " + this.cp + ".</ul></li>");

        //Métodos
        //Cada vez que se introduzca un número de plantas a añadir y el número de puertas que tendrán
        //esas plantas lo que hace es añadir uno por uno en el array las plantas con las puertas
        //correspondientes dentro de un bucle for.


        this.agregarPlantasYPuertas = function agregarPlantasYPuertas(numplantas, numPuertas) {
            if (numplantas > 0 && numPuertas > 0) {
                let numPlantasOriginal = this.plantas.length;
                for (let i = numPlantasOriginal; i < numPlantasOriginal + numplantas; i++) {
                    this.plantas.push([]);
                    for (let j = 0; j < numPuertas; j++) {
                        this.plantas[i].push("");
                    }
                }
            } else document.write("El número de plantas debe ser un número positivo<br>");
        };

        //Modificamos la propiedad número del objeto
        this.modificarNumero = function modificarNumero(numero) {
            this.numero = numero;

        };

        //Modificamos la propiedad calle del objeto
        this.modificarCalle = function modificarCalle(calle) {
            this.calle = calle;

        };

        //Modificamos la propiedad cp del objeto
        this.modificarCodigoPostal = function modificarCodigoPostal(codigo) {
            this.cp = codigo;

        };

        //Devolver el valor de la propiedad calle
        this.imprimeCalle = function imprimeCalle() {
            return this.calle;

        };

        //Devolver el valor de la propiedad número
        this.imprimeNumero = function imprimeNumero() {
            return this.numero;
        };

        ///Devolver el valor de la propiedad cp
        this.imprimeCodigoPostal = function imprimeCodigoPostal() {
            return this.cp;

        };

        //Añadir un propietario  //Revisar no funciona
        this.agregarPropietario = function agregarPropietario(propietario, planta, puerta) {
            if (propietario == null || planta == null || puerta == null) {
                document.write("Faltan datos para añadir un propietario.<br>");
                return;
            }
            document.write("<ul>");
            if (puerta > 0 && planta > 0 && planta <= this.plantas.length && puerta <= this.plantas[planta - 1].length) {
                this.plantas[planta - 1][puerta - 1] = propietario;
                document.write("<li>" + propietario + " es ahora el propietario de la puerta " + puerta +
                    " de la planta " + planta + ".</li>")

            } else {
                document.write("El edificio no tiene el número de plantas o puertas suficiente.<br>");
            }
            document.write("</ul>");
        };


        //Revisar no funciona
        this.listar = function listar() {
            document.write("<strong>Listado de propietarios del edificio calle" + this.calle + " número " + this.numero +
                ".</strong></strong><br>");
            document.write("<ul>");
            for (let i = 0; i < this.plantas.length; i++) {
                for (let j = 0; j < this.plantas[i].length; j++) {
                    let aux_planta = i + 1;
                    let aux_puerta = j + 1;
                    let aux_propietario = this.plantas[i][j];
                    if (aux_propietario !== "") aux_propietario += ".";

                    document.write("<li>Propietario del piso con puerta " + aux_puerta + " de la planta " + aux_planta +
                        ": " + aux_propietario + "</li><br>");
                }
            }
            document.write("</ul>")
        }


    }

    const edificioA = new Edificio("Garcia Prieto", 58, 15706);
    const edificioB = new Edificio("Camino Caneiro", 29, 32004);
    const edificioC = new Edificio("San Clemente", "s/n", 15705);

    //Imprimimos los datos de los métodos de los edificios
    document.write("<ul>");
    document.write("<li>El código postal del edificio A: " + edificioA.imprimeCodigoPostal() + ".</li>");
    document.write("<li>La calle del edificio C es: " + edificioC.imprimeCalle() + ".</li>");
    document.write("<li>El edificio B está situado en la calle " + edificioB.imprimeCalle() + ".</li></ul>");

    //Agregamos 2 plantas y 3 puertas al edificio A
    edificioA.agregarPlantasYPuertas(2, 3);

    //Agregamos 4 propietarios la edificio A
    edificioA.agregarPropietario("Jose Antonio López", 1, 1);
    edificioA.agregarPropietario("Luisa MArtínez", 1, 2);
    edificioA.agregarPropietario("María Castellón", 1, 3);
    edificioA.agregarPropietario("Antoio Pereira", 2, 2);

    //Listamos edificio A
    edificioA.listar();

    //Añadimos otra planta
    edificioA.agregarPlantasYPuertas(1, 3);

    //Agregamos a la planta 3 propietario
    edificioA.agregarPropietario("Pedro Meijide", 3, 2);

    //Listamos nuevamente
    edificioA.listar();


</script>

</body>
</html>
