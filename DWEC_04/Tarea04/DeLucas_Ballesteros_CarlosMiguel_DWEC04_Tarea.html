<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script type="text/javascript">

    function Edificio(calle,numero,cp) {

        //Propiedades
        this.calle = calle;
        this.numero = numero;
        this.cp = cp;
        this.planta = [];

        document.write("Construido nuevo edificio en calle: " + this.calle + " no: " + this.numero, ", CP: " + this.cp + ".<br>");

        //Métodos
        //Cada vez que se introduzca un número de plantas a añadir y el número de puertas que tendrán
        //esas plantas lo que hace es añadir uno por uno en el array las plantas con las puertas
        //correspondientes dentro de un bucle for.


        this.agregarPlantasYPuertas = function agregarPlantasYPuertas(numplantas, numPuertas) {
            for (let i = 0; i < numplantas; i++) {
                    this.planta.push([]);
                for (let j = 0; j < numPuertas; j++){
                    this.planta[i].push("");


                }

            }
        };

        //Modificamos la propiedad número del objeto
        this.modificarNumero = function modificarNumero(numero) {
            this.numero = numero;

        };

        //Modificamos la propiedad calle del objeto
        this.modificarCalle = function modificarCalle(calle) {
            this.calle = calle;

        };

        //Modificamos la propiedad cp del objeto
        this.modificarCodigoPostal = function modificarCodigoPostal(codigo) {
            this.cp = codigo;

        };

        //Devolver el valor de la propiedad calle
        this.imprimeCalle = function imprimeCalle() {
            return this.calle;

        };

        //Devolver el valor de la propiedad número
        this.imprimeNumero = function imprimeNumero() {
            return this.numero;
        };

        ///Devolver el valor de la propiedad cp
        this.imprimeCodigoPostal = function imprimeCodigoPostal() {
            return this.cp;

        };

        //Añadir un propietario  //Revisar no funciona
        this.agregarPropietario = function agregarPropietario(propietario, planta, puerta) {
            if (planta < this.planta.length && puerta <= this.planta[planta].length) {
                this.planta[planta][puerta-1]=propietario;
                                document.write(propietario + " es ahora el propietario de la puerta " + puerta +
                                    " de la planta " + planta + ".<br>")

            } else {
                document.write("El edificio no tiene el número de plantas o puertas suficiente<br>");
            }


        };

        //Revisar no funciona
        this.listar = function listar() {
            document.write("Listado de propietarios del edificio calle" + this.calle + " número " + this.numero +
            ".<br>");
            for (let i = 0; i < this.planta.length; i++) {
                for (let j = 0; j < this.planta[i].length; j++)
                {
                    let aux_planta = i+1;
                    let aux_puerta = j+1;
                    let aux_propietario = this.planta[i][j];
                    if (aux_propietario !== "") aux_propietario += ".";

                    document.write("Propietario del piso con puerta " + aux_puerta + " de la planta " + aux_planta +
                    ": " + aux_propietario + "<br>");
                }
            }
        }

    }

    const edificioA = new Edificio("real",43,28720);
    document.write("calle "+ edificioA.imprimeCalle() + ".<br>");
    document.write("cp "+ edificioA.imprimeCodigoPostal() + ".<br>");
    document.write("numero "+ edificioA.imprimeNumero() + ".<br>");
    edificioA.modificarCalle("Republicana");
    edificioA.modificarCodigoPostal(29999);
    edificioA.modificarNumero(52);
    edificioA.agregarPlantasYPuertas(2,3);
    document.write(edificioA.planta.length + "<br>");
    document.write(edificioA.planta[0].length + "<br>");
    edificioA.agregarPropietario("Felipe Juan",1,10);
    edificioA.agregarPropietario("Juan",1,2);
    edificioA.agregarPropietario("Peoa",10,3);
    document.write("calle "+ edificioA.imprimeCalle() + ".<br>");
    document.write("num "+ edificioA.imprimeNumero() + ".<br>");
    document.write("cp "+ edificioA.imprimeCodigoPostal() + ".<br>");
    document.write(edificioA.planta.toString());
    edificioA.listar();

</script>

</body>
</html>
